<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snack Details</title>
    <link rel="stylesheet" href="/movieDetailsStyles.css">
</head>

<body>

    <nav class= "navbar">
        <h2><a href="/homepage">DinBio.dk</a></h2>
        <ul>
            <li><a href="/homepage">Home</a></li>
            <li><a href="/kioskHomepage">Kiosk</a></li>
            <li><a href="/userHomepage">User</a></li>
        </ul>
    </nav>

<h1>Item Details</h1>

<div id="kiosk-details">
    <!-- Snack details will be displayed here -->
</div>

<button id="deleteSnackBtn">Delete Snack</button>
<button id="editKioskBtn">Edit Snack</button>
<button id="cancel">Cancel</button>

<script>
    document.getElementById('cancel').addEventListener('click', function () {
        window.location.href = `/kioskHomepage`;
    });

    // Get the snack ID from the URL
    const snackID = window.location.pathname.split('/').pop(); // Snack ID passed in the query string

    // Fetch the snack details from the backend using the snack ID
    fetch(`/api/cinema/snacks/${snackID}`)
        .then(response => response.json())
        .then(kiosk => {
            // Correct the element ID here
            const movieDetailsDiv = document.getElementById('kiosk-details');
            movieDetailsDiv.innerHTML = `
            <h2>${kiosk.name}</h2>
            <p><strong>Price:</strong> ${kiosk.price} kr.</p>
        `;
        })
        .catch(error => console.error('Error fetching snack details:', error));

    document.getElementById('deleteSnackBtn').addEventListener('click', function () {
        if (confirm("Are you sure you want to delete this snack?")) {
            // Make the DELETE request to remove the snack
            fetch(`/api/cinema/snacks/${snackID}`, {
                method: 'DELETE'
            })
                .then(response => {
                    if (response.ok) {
                        // Redirect back to the homepage after successful deletion
                        window.location.href = '/kioskHomepage';
                    } else {
                        console.error('Error deleting snack:', response.statusText);
                    }
                })
                .catch(error => console.error('Error deleting snack:', error));
        }
    });

    document.getElementById('editKioskBtn').addEventListener('click', function () {
        // Correct snackID here
        window.location.href = `/editSnack/view/${snackID}`;
    });
</script>

</body>

</html>
